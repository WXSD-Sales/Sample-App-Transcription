let activeMeeting,webex,textarea=document.getElementById("transcript");function connect(){return new Promise((e=>{webex||(webex=window.webex=Webex.init({config:{meetings:{reconnection:{enabled:!0}}},credentials:{access_token:document.getElementById("access-token").value}})),webex.meetings.registered?e():webex.meetings.register().then((()=>webex.meetings.syncMeetings())).then((()=>{document.getElementById("connection-status").innerText="connected",e()})).catch((e=>{throw console.error(e),e}))}))}function bindMeetingEvents(e){return e.on("meeting:receiveTranscription:started",(e=>{textarea.innerHTML+=`\n${JSON.stringify(e)}`})),e.on("meeting:receiveTranscription:stopped",(()=>{textarea.innerHTML+="\nNot Receiving transcription anymore!"})),e.on("error",(e=>{console.error(e)})),document.getElementById("hangup").addEventListener("click",(()=>{e.leave()})),e}function joinMeeting(e){return e.join({receiveTranscription:!0}).then((()=>{textarea.innerHTML="Listening!"}))}["access-token","invitee"].forEach((e=>{const t=document.getElementById(e);t.value=localStorage.getItem(e),t.addEventListener("change",(t=>{localStorage.setItem(e,t.target.value)}))})),document.getElementById("hangup").addEventListener("click",(()=>{activeMeeting&&activeMeeting.leave()})),document.getElementById("credentials").addEventListener("submit",(e=>{e.preventDefault(),connect()})),document.getElementById("dialer").addEventListener("submit",(e=>{e.preventDefault();const t=document.getElementById("invitee").value;connect().then((()=>webex.meetings.create(t))).then((e=>(activeMeeting=e,e))).then(bindMeetingEvents).then(joinMeeting).catch((e=>{console.error(e)}))}));
//# sourceMappingURL=index.8c78f104.js.map
